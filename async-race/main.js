(()=>{"use strict";var t=function(){return t=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++)for(var r in n=arguments[e])Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r]);return t},t.apply(this,arguments)},n={carsPage:1,cars:[],carsCount:0,winnersPage:1,winners:[],winnersCount:0,animations:{},view:"Garage",sort:"wins",order:"ASC",btnPrev:!1,btnNext:!1};const e=new(function(){function e(){this.state=n}return e.prototype.update=function(n){this.state=t(t({},this.state),n)},e}());var a,r=function(t,n,e,a){return new(e||(e=Promise))((function(r,c){function o(t){try{i(a.next(t))}catch(t){c(t)}}function s(t){try{i(a.throw(t))}catch(t){c(t)}}function i(t){var n;t.done?r(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(o,s)}i((a=a.apply(t,n||[])).next())}))},c=function(t,n){var e,a,r,c,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return c={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function s(c){return function(s){return function(c){if(e)throw new TypeError("Generator is already executing.");for(;o;)try{if(e=1,a&&(r=2&c[0]?a.return:c[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,c[1])).done)return r;switch(a=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,a=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!((r=(r=o.trys).length>0&&r[r.length-1])||6!==c[0]&&2!==c[0])){o=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){o.label=c[1];break}if(6===c[0]&&o.label<r[1]){o.label=r[1],r=c;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(c);break}r[2]&&o.ops.pop(),o.trys.pop();continue}c=n.call(t,o)}catch(t){c=[6,t],a=0}finally{e=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}},o=function(t,n,e){if(e||2===arguments.length)for(var a,r=0,c=n.length;r<c;r++)!a&&r in n||(a||(a=Array.prototype.slice.call(n,0,r)),a[r]=n[r]);return t.concat(a||Array.prototype.slice.call(n))},s="http://127.0.0.1:3000",i="".concat(s,"/garage"),u="".concat(s,"/engine"),d="".concat(s,"/winners"),l=["Lada","Acura","Alfa-Romeo","Aston-Martin","Audi","Bentley","BMW","Bugatti","Buick","Cadillac","Chevrolet","Chrysler","Citroen","Dodge","Ferrari","Fiat","Ford","Geely","Genesis","GMC","Honda","Hyundai","Infiniti","Jaguar","Jeep","Kia","Koenigsegg","Lamborghini","Lancia","Land Rover","Lexus","Lincoln","Lotus","Maserati","Maybach","Mazda","McLaren","Mercedes","Mini","Mitsubishi","Nissan","Opel","Pagani","Peugeot","Pontiac","Porsche","Ram","Renault","Rolls-Royce","Skoda","Smart","Subaru","Suzuki","Tesla","Toyota","Volkswagen","Volvo"],b=["Durango","Challenger","Charger","Grand Caravan","X7","X5","X3","X6 M","X6","X1","X4","Aircross","Duster","CR-V","Corolla","C4 Cactus","DS3","C1","C3","Crossback","UX 250h","NX 300h","LC 500","RX 350/200t","Rapid","Largus","IS 200t","LS 500h","RX","Hatchback","CX-5","Sedan","CX-30","CX-9","CX-3","Roadster","Phantom","Camry","Polo","Cullinan","Ghost","Dawn","Duster","Arkana","Sandero","Logan","Logan MCV","Captur","Kadjar","RAV4","Rio","Creta","Solaris"],h=function(){for(var t="#",n=0;n<6;n+=1)t+="0123456789ABCDEF"[Math.floor(16*Math.random())];return t},v=function(){var t=l[Math.floor(Math.random()*l.length)],n=b[Math.floor(Math.random()*b.length)];return"".concat(t," ").concat(n)},f=function(t,n){return r(void 0,void 0,void 0,(function(){var a,r,s,i,u,d,l;return c(this,(function(c){switch(c.label){case 0:return[4,Promise.race(t)];case 1:return a=c.sent(),r=a.success,s=a.id,i=a.time,r?[2,{carWinner:e.state.cars.find((function(t){return t.id===s})),time:Number((i/1e3).toFixed(2))}]:(u=n.findIndex((function(t){return t===s})),d=o(o([],t.slice(0,u),!0),t.slice(u+1,t.length),!0),l=o(o([],n.slice(0,u),!0),n.slice(u+1,n.length),!0),[2,f(d,l)])}}))}))},p=function(){return p=Object.assign||function(t){for(var n,e=1,a=arguments.length;e<a;e++)for(var r in n=arguments[e])Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r]);return t},p.apply(this,arguments)},m=function(t,n,e,a){return new(e||(e=Promise))((function(r,c){function o(t){try{i(a.next(t))}catch(t){c(t)}}function s(t){try{i(a.throw(t))}catch(t){c(t)}}function i(t){var n;t.done?r(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(o,s)}i((a=a.apply(t,n||[])).next())}))},y=function(t,n){var e,a,r,c,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return c={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function s(c){return function(s){return function(c){if(e)throw new TypeError("Generator is already executing.");for(;o;)try{if(e=1,a&&(r=2&c[0]?a.return:c[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,c[1])).done)return r;switch(a=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,a=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!((r=(r=o.trys).length>0&&r[r.length-1])||6!==c[0]&&2!==c[0])){o=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){o.label=c[1];break}if(6===c[0]&&o.label<r[1]){o.label=r[1],r=c;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(c);break}r[2]&&o.ops.pop(),o.trys.pop();continue}c=n.call(t,o)}catch(t){c=[6,t],a=0}finally{e=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}},g=function(t){return m(void 0,void 0,void 0,(function(){return y(this,(function(n){switch(n.label){case 0:return[4,fetch("".concat(i,"/").concat(t))];case 1:return[2,n.sent().json()]}}))}))},w=function(t){return m(void 0,void 0,void 0,(function(){return y(this,(function(n){switch(n.label){case 0:return[4,fetch(i,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}})];case 1:return[2,n.sent().json()]}}))}))},S=function(t){return m(void 0,void 0,void 0,(function(){return y(this,(function(n){switch(n.label){case 0:return[4,fetch("".concat(i,"/").concat(t),{method:"DELETE"})];case 1:return[2,n.sent().json()]}}))}))},M=function(t){return m(void 0,void 0,void 0,(function(){return y(this,(function(n){switch(n.label){case 0:return[4,fetch("".concat(u,"?id=").concat(t,"&status=started"),{method:"PATCH"})];case 1:return[2,n.sent().json()]}}))}))},C=function(t){return m(void 0,void 0,void 0,(function(){return y(this,(function(n){switch(n.label){case 0:return[4,fetch("".concat(u,"?id=").concat(t,"&status=stopped"),{method:"PATCH"})];case 1:return[2,n.sent().json()]}}))}))},q=function(t){return m(void 0,void 0,void 0,(function(){var n,e,a;return y(this,(function(r){switch(r.label){case 0:return[4,fetch("".concat(u,"?id=").concat(t,"&status=drive"),{method:"PATCH"}).catch()];case 1:return 200===(n=r.sent()).status?[3,2]:(e={success:!1},[3,4]);case 2:return a=[{}],[4,n.json()];case 3:e=p.apply(void 0,a.concat([r.sent()])),r.label=4;case 4:return[2,e]}}))}))},P=function(t){return m(void 0,void 0,void 0,(function(){return y(this,(function(n){switch(n.label){case 0:return[4,fetch("".concat(d,"/").concat(t))];case 1:return[2,n.sent().json()]}}))}))},L=function(t){return m(void 0,void 0,void 0,(function(){return y(this,(function(n){switch(n.label){case 0:return[4,fetch("".concat(d,"/").concat(t))];case 1:return[2,n.sent().status]}}))}))},x=function(t){return m(void 0,void 0,void 0,(function(){return y(this,(function(n){switch(n.label){case 0:return[4,fetch("".concat(d,"/").concat(t),{method:"DELETE"})];case 1:return[2,n.sent().json()]}}))}))},T=function(t,n){return m(void 0,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,fetch("".concat(d,"/").concat(t),{method:"PUT",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}})];case 1:return[2,e.sent().json()]}}))}))},z=function(t,n){return m(void 0,void 0,void 0,(function(){var e;return y(this,(function(a){switch(a.label){case 0:return[4,L(t)];case 1:return 404!==a.sent()?[3,3]:[4,(r={id:t,wins:1,time:n},m(void 0,void 0,void 0,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,fetch(d,{method:"POST",body:JSON.stringify(r),headers:{"Content-Type":"application/json"}})];case 1:return[2,t.sent().json()]}}))})))];case 2:return a.sent(),[3,6];case 3:return[4,P(t)];case 4:return e=a.sent(),[4,T(t,{wins:e.wins+1,time:n<e.time?n:e.time})];case 5:a.sent(),a.label=6;case 6:return[2]}var r}))}))},_=function(t,n,e,a){return new(e||(e=Promise))((function(r,c){function o(t){try{i(a.next(t))}catch(t){c(t)}}function s(t){try{i(a.throw(t))}catch(t){c(t)}}function i(t){var n;t.done?r(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(o,s)}i((a=a.apply(t,n||[])).next())}))},A=function(t,n){var e,a,r,c,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return c={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function s(c){return function(s){return function(c){if(e)throw new TypeError("Generator is already executing.");for(;o;)try{if(e=1,a&&(r=2&c[0]?a.return:c[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,c[1])).done)return r;switch(a=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,a=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!((r=(r=o.trys).length>0&&r[r.length-1])||6!==c[0]&&2!==c[0])){o=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){o.label=c[1];break}if(6===c[0]&&o.label<r[1]){o.label=r[1],r=c;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(c);break}r[2]&&o.ops.pop(),o.trys.pop();continue}c=n.call(t,o)}catch(t){c=[6,t],a=0}finally{e=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}},E=function(t){return'\n  <svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="150px" height="80px" viewBox="0 0 1280.000000 640.000000" preserveAspectRatio="xMidYMid meet">\n    <g transform="translate(0.000000,640.000000) scale(0.100000,-0.100000)" fill="'.concat(t,'" stroke="none">\n      <path d="M3565 5336 c-106 -30 -101 -26 -108 -111 -4 -42 -9 -80 -12 -85 -6 -10 -246 -105 -590 -234 -448 -167 -1052 -415 -1173 -483 -78 -43 -193 -91 -250 -104 -23 -5 -98 -14 -165 -19 -67 -6 -167 -19 -222 -30 -154 -31 -340 -49 -563 -57 l-203 -6 -43 -66 c-59 -91 -60 -95 -26 -130 37 -37 38 -65 3 -150 -25 -62 -27 -78 -31 -256 l-4 -190 -38 -32 c-91 -78 -133 -209 -134 -418 0 -194 11 -396 26 -482 13 -71 14 -74 72 -122 69 -58 130 -129 158 -184 64 -126 534 -211 1384 -250 l92 -4 -6 119 c-6 142 8 256 49 383 112 352 394 622 756 722 90 26 112 28 278 28 165 0 188 -2 278 -27 201 -56 361 -152 504 -302 140 -145 222 -293 274 -492 21 -79 24 -109 23 -279 -1 -127 -6 -214 -16 -263 l-15 -73 3006 7 c1653 4 3007 8 3009 9 1 1 -8 37 -20 81 -19 67 -22 105 -22 259 -1 166 1 187 27 279 117 421 467 736 885 797 119 17 325 7 432 -21 239 -63 453 -205 601 -399 70 -92 154 -267 185 -386 24 -88 27 -119 27 -260 1 -116 -4 -181 -16 -234 -10 -41 -16 -75 -15 -76 2 -1 62 2 133 6 266 16 458 45 525 79 48 24 97 81 127 146 l24 52 -16 157 c-15 152 -15 163 4 284 63 388 50 680 -35 802 -134 193 -526 336 -1429 519 -737 149 -1322 209 -2033 210 -228 0 -226 0 -347 85 -187 131 -1045 607 -1471 815 -383 187 -788 281 -1439 332 -208 17 -1106 16 -1400 0 -121 -7 -314 -19 -430 -27 -302 -22 -286 -22 -341 10 -140 81 -187 94 -269 71z m1885 -333 c6 -37 38 -238 71 -446 32 -209 66 -422 75 -474 9 -52 15 -96 13 -97 -11 -9 -1699 29 -1951 44 -206 13 -417 36 -485 54 -98 26 -198 119 -249 231 -35 75 -36 172 -5 255 17 45 30 61 68 86 83 54 135 80 253 127 341 136 858 230 1460 267 269 16 270 16 511 18 l227 2 12 -67z m630 47 c264 -18 777 -110 1029 -186 186 -56 445 -188 756 -387 211 -134 274 -181 250 -185 -75 -12 -133 -50 -162 -106 -19 -35 -21 -136 -4 -179 l11 -27 -907 2 -906 3 -59 160 c-110 302 -298 878 -298 916 0 6 95 2 290 -11z"/>\n      <path d="M2633 3125 c-223 -40 -410 -141 -568 -306 -132 -138 -213 -283 -262 -467 -22 -83 -26 -119 -26 -247 -1 -169 10 -236 65 -382 87 -230 271 -436 493 -551 85 -44 178 -78 271 -98 107 -23 312 -23 419 1 392 84 699 375 802 761 23 86 26 120 27 254 1 158 -5 199 -46 330 -98 310 -355 567 -668 669 -150 50 -354 64 -507 36z m350 -301 c249 -56 457 -247 543 -499 25 -72 28 -95 28 -220 1 -153 -15 -228 -74 -345 -94 -186 -283 -337 -485 -386 -96 -24 -268 -24 -360 0 -320 84 -544 355 -562 681 -20 359 209 673 558 765 94 24 253 26 352 4z"/>\n      <path d="M2600 2697 c-36 -13 -85 -36 -109 -51 l-44 -28 116 -115 c81 -82 120 -114 131 -110 14 6 16 29 16 167 0 186 6 178 -110 137z"/>\n      <path d="M2920 2561 c0 -139 2 -162 16 -168 11 -4 50 28 130 108 l115 114 -28 22 c-34 28 -138 70 -193 79 l-40 7 0 -162z"/> <path d="M2282 2448 c-28 -36 -92 -191 -92 -225 0 -10 34 -13 165 -13 151 0 165 1 165 18 0 15 -206 232 -221 232 -4 0 -11 -6 -17 -12z"/> <path d="M3222 2351 c-62 -59 -112 -115 -112 -124 0 -15 17 -17 165 -17 131 0 165 3 165 13 0 40 -69 205 -95 227 -7 6 -48 -27 -123 -99z"/>\n      <path d="M2781 2332 c-12 -22 11 -62 34 -62 8 0 21 10 29 22 20 28 4 58 -29 58 -13 0 -29 -8 -34 -18z"/>\n      <path d="M2749 2161 c-32 -33 -37 -67 -14 -110 29 -57 104 -64 151 -14 53 57 9 153 -71 153 -27 0 -44 -8 -66 -29z"/>\n      <path d="M2570 2125 c-26 -32 13 -81 48 -59 24 16 27 45 6 61 -23 17 -39 16 -54 -2z"/>\n      <path d="M3006 2124 c-20 -19 -20 -38 -2 -54 23 -19 61 -8 64 18 7 44 -32 67 -62 36z"/>\n      <path d="M2190 1975 c0 -29 41 -140 72 -194 l31 -53 117 117 c71 71 116 123 113 131 -4 11 -40 14 -169 14 -141 0 -164 -2 -164 -15z"/>\n      <path d="M3110 1972 c0 -9 51 -68 114 -131 l114 -114 31 54 c30 51 71 165 71 195 0 11 -31 14 -165 14 -151 0 -165 -1 -165 -18z"/>\n      <path d="M2780 1901 c-7 -15 -5 -24 8 -41 32 -40 85 -4 62 41 -14 25 -56 25 -70 0z"/>\n      <path d="M2562 1697 c-61 -62 -112 -115 -112 -119 0 -18 208 -108 249 -108 7 0 11 54 11 164 0 140 -2 165 -16 170 -9 3 -16 6 -17 6 -1 0 -53 -51 -115 -113z"/>\n      <path d="M2933 1803 c-15 -6 -19 -333 -4 -333 46 0 251 88 251 108 0 9 -223 232 -230 231 -3 0 -11 -3 -17 -6z"/>\n      <path d="M10700 3119 c-390 -84 -696 -376 -797 -759 -31 -117 -41 -292 -24 -411 33 -227 150 -453 318 -609 267 -250 643 -344 993 -249 117 32 283 118 380 196 487 396 518 1128 67 1560 -97 93 -166 140 -290 198 -137 64 -235 86 -407 91 -120 3 -162 0 -240 -17z m445 -313 c238 -81 409 -258 486 -506 30 -96 33 -289 5 -388 -110 -400 -513 -637 -911 -536 -149 38 -313 147 -402 267 -176 238 -203 533 -71 797 34 69 60 103 138 180 77 78 111 104 181 139 129 65 207 81 364 77 109 -3 143 -7 210 -30z"/>\n      <path d="M10703 2700 c-54 -19 -153 -71 -153 -80 0 -3 51 -57 114 -119 80 -80 119 -112 130 -108 14 5 16 29 16 167 l0 160 -27 -1 c-16 0 -52 -9 -80 -19z"/>\n      <path d="M11020 2561 c0 -139 2 -162 16 -168 22 -8 247 216 234 232 -17 20 -163 84 -207 91 l-43 7 0 -162z"/>\n      <path d="M10366 2424 c-29 -44 -76 -165 -76 -194 0 -19 7 -20 165 -20 126 0 165 3 165 13 0 7 -51 63 -114 126 l-114 114 -26 -39z"/>\n      <path d="M11313 2348 c-61 -62 -109 -119 -106 -125 6 -15 333 -19 333 -4 0 45 -88 241 -108 241 -4 0 -57 -51 -119 -112z"/>\n      <path d="M10882 2338 c-17 -17 -15 -32 7 -52 16 -14 23 -15 41 -6 31 17 24 64 -10 68 -14 2 -31 -3 -38 -10z"/>\n      <path d="M10846 2159 c-68 -81 17 -194 110 -144 89 48 56 175 -46 175 -30 0 -44 -6 -64 -31z"/>\n      <path d="M10670 2126 c-19 -23 -8 -61 18 -64 44 -7 67 32 36 62 -19 20 -38 20 -54 2z"/>\n      <path d="M11106 2127 c-21 -16 -18 -45 7 -61 37 -23 77 35 41 61 -10 7 -21 13 -24 13 -3 0 -14 -6 -24 -13z"/>\n      <path d="M10290 1970 c0 -29 43 -141 74 -195 l28 -48 116 116 c81 81 113 120 109 131 -6 14 -29 16 -167 16 -152 0 -160 -1 -160 -20z"/>\n      <path d="M11207 1978 c-3 -7 47 -66 111 -130 l116 -118 27 43 c27 44 79 177 79 203 0 12 -28 14 -164 14 -122 0 -166 -3 -169 -12z"/>\n      <path d="M10881 1901 c-14 -25 -5 -48 20 -56 27 -9 51 13 47 44 -4 34 -51 43 -67 12z"/>\n      <path d="M10662 1697 c-61 -62 -112 -115 -112 -119 0 -20 201 -108 247 -108 10 0 13 34 13 164 0 140 -2 165 -16 170 -9 3 -16 6 -17 6 -1 0 -53 -51 -115 -113z"/>\n      <path d="M11033 1803 c-10 -3 -13 -47 -13 -169 0 -90 4 -164 8 -164 36 0 186 61 239 98 16 10 -216 242 -234 235z"/>\n    </g>\n  </svg>\n')},N=function(){return'\n  <div class="dashboard">\n    <div class="dasboard__info">\n      <h2>Garage ('.concat(e.state.carsCount,")</h2>\n      <h2>Page #").concat(e.state.carsPage,'</h2>\n    </div>\n    <div class="dashboard__controls">\n      <div class="dashboard__create" id="create">\n        <input class="input create-name" id="input create-name" name="name" type="text">\n        <input class="input create-color" id="input create-name" name="color" type="color" value="#ffffff">\n        <button class="button create-button" type="submit">CREATE</button>\n      </div>\n      <div class="dashboard__update" id="update">\n        <input class="input update-name" id="input update-name" name="name" type="text" disabled>\n        <input class="input update-color" id="input update-name" name="color" type="color" value="#ffffff" disabled>\n        <button class="button update-button" type="submit" disabled>UPDATE</button>\n      </div>\n      <div class="dashboard__race">\n        <button class="button race-button" id="race">RACE</button>\n        <button class="button reset-button" id="reset">RESET</button>\n        <button class="button generator-button" id="generator">GENERATE</button>\n      </div>\n    </div>\n  </div>\n  <div class="cars-container">').concat(e.state.cars.map((function(t){return function(t){return'\n  <div class="car-container" id="car-container-'.concat(t.id,'">\n    <div class="car-params">\n      <div class="car-params__top">\n        <button class="btn btn-edit" data-id="').concat(t.id,'">Edit</button>\n        <h3>').concat(t.name,'</h3>\n        <button class="btn btn-delete" data-id="').concat(t.id,'">Delete</button>\n      </div>\n      <div class="car-params__bottom">\n        <button class="btn btn-reset-car" id="btn-reset-car-').concat(t.id,'" data-id="').concat(t.id,'" disabled>Reset</button>\n        <button class="btn btn-start-car" id="btn-start-car-').concat(t.id,'" data-id="').concat(t.id,'">Start</button>\n      </div>\n    </div>\n    <div class="racing-track">\n      <div class="car car-').concat(t.id,'" id="car-').concat(t.id,'" data-id="').concat(t.id,'">\n        ').concat(E(t.color),'\n      </div>\n      <img clas="finish-line"></img>\n    </div>\n  </div>\n')}(t)})),"</div>\n")},j=function(){return'\n  <div class="winners-container">\n    <h2>Winners ('.concat(e.state.winnersCount,")</h2>\n    <h2>Page#").concat(e.state.winnersPage,'</h2>\n    <table class="winners-table">\n      <thead>\n        <th>Number</th>\n        <th>Car</th>\n        <th>Name</th>\n        <th class="table-button table-wins ').concat("wins"===e.state.sort?e.state.order:"",'" id="sort-by-wins">Wins</th>\n        <th class="table-button table-time ').concat("time"===e.state.sort?e.state.order:"",'" id="sort-by-time">Time</th>\n      </thead>\n      <tbody>\n        ').concat(e.state.winners.map((function(t,n){return"\n          <tr>\n            <td>".concat(n+1,'</td>\n            <td class="td-image">').concat(E(t.car.color),"</td>\n            <td>").concat(t.car.name,"</td>\n            <td>").concat(t.wins,"</td>\n            <td>").concat(t.time,"</td>\n          </tr>\n        ")})),"\n      </tbody>\n    </table>\n  </div>\n")},k=function(){document.body.innerHTML='\n  <wrapper class="wrapper">\n    <header class="header">\n      <div class="container header__container">\n        <nav class="nav">\n          <button class="btn btn-garage btn-disable" disabled>TO GARAGE</button>\n          <button class="btn btn-winners btn-active">TO WINNERS</button>\n        </nav>\n        <h1>Async Race</h1>\n      </div>\n    </header>\n    <main class="main">\n      <div class="container main__container">\n        <div class="garage">'.concat(N(),'</div>\n        <div class="winners hidden">').concat(j(),'</div>\n        <div class="page-buttons">\n          <button class="btn btn-prev" ').concat(1===e.state.carsPage||1===e.state.winnersPage?"disabled":"",'>PREV</button>\n          <button class="btn btn-next" ').concat(e.state.carsCount<=7?"disabled":"",'>NEXT</button>\n        </div>\n      </div>\n    </main>\n    <footer class="footer">\n      <div class="container footer__container">\n        <div class="footer__data">\n          <span>Â©</span>\n          <span>2022</span>\n          <a class="github-link" href="https://github.com/Aldar0K">github</a>\n        </div>\n        <div class="footer__rss">\n          <a class="rss-link" href="https://rs.school/js/">\n              <img src="https://rs.school/images/rs_school_js.svg" alt="rs_school_js.svg" width="120px">\n          </a>\n        </div>\n      </div>\n    </footer>\n  </wrapper>\n  ')},R=function(){return _(void 0,void 0,void 0,(function(){var t,n,a;return A(this,(function(r){switch(r.label){case 0:return n=(t=e).update,a={},[4,(void 0===c&&(c=e.state.carsPage),void 0===o&&(o=7),m(void 0,void 0,void 0,(function(){var t,n;return y(this,(function(a){switch(a.label){case 0:return[4,fetch("".concat(i,"?_page=").concat(c,"&_limit=").concat(o))];case 1:return[4,(t=a.sent()).json()];case 2:return n=a.sent(),t.headers.get("X-Total-Count")&&e.update({carsCount:Number(t.headers.get("X-Total-Count")),carsPage:c}),[2,n]}}))})))];case 1:return n.apply(t,[(a.cars=r.sent(),a)]),7*e.state.carsPage<e.state.carsCount?(document.querySelector(".btn-next").disabled=!1,e.update({btnNext:!0})):(document.querySelector(".btn-next").disabled=!0,e.update({btnNext:!1})),e.state.carsPage>1?(document.querySelector(".btn-prev").disabled=!1,e.update({btnPrev:!0})):(document.querySelector(".btn-prev").disabled=!0,e.update({btnPrev:!1})),[2]}var c,o}))}))},X=function(){return _(void 0,void 0,void 0,(function(){var t,n,a;return A(this,(function(r){switch(r.label){case 0:return n=(t=e).update,a={},[4,(c=e.state.winnersPage,o=7,s=e.state.sort,i=e.state.order,void 0===c&&(c=1),void 0===o&&(o=10),void 0===s&&(s="time"),void 0===i&&(i="ASC"),m(void 0,void 0,void 0,(function(){var t,n,a,r;return y(this,(function(u){switch(u.label){case 0:return[4,fetch("".concat(d,"?_page=").concat(c,"&_limit=").concat(o,"&_sort=").concat(s,"&_order=").concat(i))];case 1:return[4,(t=u.sent()).json()];case 2:return n=u.sent(),t.headers.get("X-Total-Count")&&e.update({winnersCount:Number(t.headers.get("X-Total-Count")),winnersPage:c}),r=(a=Promise).all,[4,n];case 3:return[4,r.apply(a,[u.sent().map((function(t){return m(void 0,void 0,void 0,(function(){var n,e;return y(this,(function(a){switch(a.label){case 0:return n=[p({},t)],e={},[4,g(t.id)];case 1:return[2,p.apply(void 0,n.concat([(e.car=a.sent(),e)]))]}}))}))}))])];case 4:return[2,u.sent()]}}))})))];case 1:return n.apply(t,[(a.winners=r.sent(),a)]),10*e.state.winnersPage<e.state.winnersCount?(document.querySelector(".btn-next").disabled=!1,e.update({btnNext:!0})):(document.querySelector(".btn-next").disabled=!0,e.update({btnNext:!1})),e.state.winnersPage>1?(document.querySelector(".btn-prev").disabled=!1,e.update({btnPrev:!0})):(document.querySelector(".btn-prev").disabled=!0,e.update({btnPrev:!1})),[2]}var c,o,s,i}))}))},H=function(t){return _(void 0,void 0,void 0,(function(){var n,a,r,c,o,s,i;return A(this,(function(u){switch(u.label){case 0:return document.querySelector(".btn-next").disabled=!0,document.querySelector(".btn-prev").disabled=!0,document.querySelector("#btn-start-car-".concat(t)).disabled=!0,[4,M(t)];case 1:return n=u.sent(),a=n.velocity,r=n.distance,c=Math.round(r/a),document.querySelector("#btn-reset-car-".concat(t)).disabled=!1,o=document.querySelector("#car-".concat(t)),s=o.parentElement.clientWidth-o.clientWidth,e.state.animations[t]=function(t,n,e){var a=null,r={},c=function(o){a||(a=o);var s=o-a,i=Math.round(s*(n/e));t.style.transform="translateX(".concat(Math.min(i,n),"px)"),i<n&&(r.id=window.requestAnimationFrame(c))};return r.id=window.requestAnimationFrame(c),r}(o,s,c),[4,q(t)];case 2:return(i=u.sent().success)||window.cancelAnimationFrame(e.state.animations[t].id),[2,{success:i,id:t,time:c}]}}))}))},G=function(t){return _(void 0,void 0,void 0,(function(){return A(this,(function(n){switch(n.label){case 0:return document.querySelector("#btn-reset-car-".concat(t)).disabled=!0,[4,C(t)];case 1:return n.sent(),document.querySelector("#btn-start-car-".concat(t)).disabled=!1,document.querySelector("#car-".concat(t)).style.transform="translateX(0)",e.state.animations[t]&&cancelAnimationFrame(e.state.animations[t].id),[2]}}))}))},O=function(t){return _(void 0,void 0,void 0,(function(){return A(this,(function(n){switch(n.label){case 0:return e.state.order="ASC"===e.state.order?"DESC":"ASC",e.state.sort=t,[4,X()];case 1:return n.sent(),document.querySelector(".winners").innerHTML=j(),[2]}}))}))};_(void 0,void 0,void 0,(function(){return A(this,(function(t){switch(t.label){case 0:return k(),[4,R()];case 1:return t.sent(),k(),document.body.addEventListener("click",(function(t){return _(void 0,void 0,void 0,(function(){var n;return A(this,(function(o){return function(t){_(void 0,void 0,void 0,(function(){var n;return A(this,(function(r){switch(r.label){case 0:return t.classList.contains("btn-start-car")?(n=Number(t.dataset.id),[4,H(n)]):[3,2];case 1:r.sent(),document.querySelector(".btn-prev").disabled=!e.state.btnPrev,document.querySelector(".btn-next").disabled=!e.state.btnNext,r.label=2;case 2:return t.classList.contains("btn-reset-car")&&(n=Number(t.dataset.id),G(n)),t.classList.contains("btn-edit")?(n=Number(t.dataset.id),[4,g(n)]):[3,4];case 3:a=r.sent(),document.querySelector(".update-name").value=a.name,document.querySelector(".update-color").value=a.color,document.querySelector(".update-name").disabled=!1,document.querySelector(".update-color").disabled=!1,document.querySelector(".update-button").disabled=!1,r.label=4;case 4:return t.classList.contains("btn-delete")?(n=Number(t.dataset.id),[4,S(n)]):[3,8];case 5:return r.sent(),[4,x(n)];case 6:return r.sent(),[4,R()];case 7:r.sent(),document.querySelector(".garage").innerHTML=N(),r.label=8;case 8:return t.classList.contains("generator-button")?(t.disabled=!0,[4,(void 0===c&&(c=100),m(void 0,void 0,void 0,(function(){var t;return y(this,(function(n){switch(n.label){case 0:t=0,n.label=1;case 1:return t<c?[4,w({name:v(),color:h()})]:[3,4];case 2:n.sent(),n.label=3;case 3:return t+=1,[3,1];case 4:return[2]}}))})))]):[3,11];case 9:return r.sent(),[4,R()];case 10:r.sent(),document.querySelector(".garage").innerHTML=N(),t.disabled=!1,r.label=11;case 11:return[2]}var c}))}))}(n=t.target),function(t){_(void 0,void 0,void 0,(function(){return A(this,(function(n){switch(n.label){case 0:return t.classList.contains("btn-prev")?"Garage"!==e.state.view?[3,2]:(e.state.carsPage-=1,[4,R()]):[3,4];case 1:return n.sent(),document.querySelector(".garage").innerHTML=N(),[3,4];case 2:return e.state.winnersPage-=1,[4,X()];case 3:n.sent(),document.querySelector(".winners").innerHTML=j(),n.label=4;case 4:return t.classList.contains("btn-next")?"Garage"!==e.state.view?[3,6]:(e.state.carsPage+=1,[4,R()]):[3,8];case 5:return n.sent(),document.querySelector(".garage").innerHTML=N(),[3,8];case 6:return e.state.winnersPage+=1,[4,X()];case 7:n.sent(),document.querySelector(".winners").innerHTML=j(),n.label=8;case 8:return[2]}}))}))}(n),function(t){_(void 0,void 0,void 0,(function(){return A(this,(function(n){switch(n.label){case 0:return t.classList.contains("btn-garage")&&(e.state.view="Garage",document.querySelector(".btn-garage").disabled=!0,document.querySelector(".btn-winners").disabled=!1,document.querySelector(".garage").classList.toggle("hidden"),document.querySelector(".winners").classList.toggle("hidden"),e.state.carsPage>1&&(document.querySelector(".btn-prev").disabled=!1),7*e.state.carsPage<e.state.carsCount&&(document.querySelector(".btn-next").disabled=!1),e.update({btnNext:7*e.state.carsPage<e.state.carsCount})),t.classList.contains("btn-winners")?(e.state.view="Winners",document.querySelector(".btn-winners").disabled=!0,document.querySelector(".btn-garage").disabled=!1,document.querySelector(".winners").classList.toggle("hidden"),document.querySelector(".garage").classList.toggle("hidden"),[4,X()]):[3,2];case 1:n.sent(),document.querySelector(".winners").innerHTML=j(),n.label=2;case 2:return[2]}}))}))}(n),function(t){_(void 0,void 0,void 0,(function(){var n,o,s,u,d,l,b;return A(this,(function(h){switch(h.label){case 0:return t.classList.contains("race-button")?(t.disabled=!0,[4,(S=H,r(void 0,void 0,void 0,(function(){var t;return c(this,(function(n){switch(n.label){case 0:return t=e.state.cars.map((function(t){var n=t.id;return S(n)})),[4,f(t,e.state.cars.map((function(t){return t.id})))];case 1:return[2,n.sent()]}}))})))]):[3,3];case 1:return n=h.sent(),o=n.carWinner,s=n.time,[4,z(o.id,s)];case 2:h.sent(),alert("".concat(o.name," finished first!\nTime: ").concat(s)),document.querySelector(".reset-button").disabled=!1,document.querySelector(".btn-prev").disabled=!e.state.btnPrev,document.querySelector(".btn-next").disabled=!e.state.btnNext,h.label=3;case 3:return t.classList.contains("reset-button")&&(t.disabled=!0,e.state.cars.forEach((function(t){var n=t.id;return G(n)})),document.querySelector(".race-button").disabled=!1),t.classList.contains("create-button")?((u=document.querySelector(".create-name").value)||(u=v()),d=document.querySelector(".create-color").value,[4,w({name:u,color:d})]):[3,6];case 4:return h.sent(),[4,R()];case 5:h.sent(),document.querySelector(".garage").innerHTML=N(),document.querySelector(".create-name").value="",h.label=6;case 6:return t.classList.contains("update-button")?(l=document.querySelector(".update-name").value,b=document.querySelector(".update-color").value,[4,(p=a.id,g={name:l,color:b},m(void 0,void 0,void 0,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,fetch("".concat(i,"/").concat(p),{method:"PUT",body:JSON.stringify(g),headers:{"Content-Type":"application/json"}})];case 1:return[2,t.sent().json()]}}))})))]):[3,9];case 7:return h.sent(),[4,R()];case 8:h.sent(),document.querySelector(".garage").innerHTML=N(),h.label=9;case 9:return[2]}var p,g,S}))}))}(n),function(t){_(void 0,void 0,void 0,(function(){return A(this,(function(n){return t.classList.contains("table-wins")&&O("wins"),t.classList.contains("table-time")&&O("time"),[2]}))}))}(n),[2]}))}))})),[2]}}))}))})();